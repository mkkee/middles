<!DOCTYPE html> 
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="author" content="amhf" />
		<meta name="copyright" content="2019 AMHF" />
		<meta name="robots" content="index, follow" />
		<meta name="description" content="AMHF" />
		<meta name="keywords" content="szkoly, amhf" />

		<title>Szkoły Średnie</title>
		
		<link rel="icon" type="image/png" href="img/middles_fav.png" sizes="16x16"/>
		<link rel="icon" type="image/png" href="img/middles_fav.png" sizes="32x32"/>
		<link rel="icon" type="image/png" href="img/middles_fav.png" sizes="96x96"/>

		<xxxlink rel="stylesheet" href="css/print.css" type="text/css" media="print"/>
		
		<style type="text/css">

			html, body {
				margin: 0;
			}		
			
			.menu {grid-area: menu;}
			.sidebar {grid-area: sidebar;}
			.main {grid-area: main;}
			.footer {grid-area: footer;}
			.ads {grid-area: ads;}
			
			.gridcontainer {
				display: grid;
				grid-template-areas: "menu menu ads"
									 "sidebar main ads"
									 "footer footer footer";
				min-height: 100vh;
				grid-template-columns: 150px 1fr 200px;
				grid-template-rows: 35px 1fr 20px;
				align-items: stretch;
			}
			
			@media only screen and (max-width: 600px) {
				.gridcontainer {
					grid-template-areas: "menu"
										 "sidebar"
										 "main"
										 "ads"
										 "footer";
					grid-template-columns: 100%;
					grid-template-rows: 40px 
										200px 
										200fr
										100fr 
										40px;
				}
			}

			@media only screen 
   				and (max-width : 1080px) 
   				and (max-height : 1920px) {
				.gridcontainer {
					grid-template-areas: "menu"
										 "sidebar"
										 "main"
										 "ads"
										 "footer";
					grid-template-columns: 100%;
					grid-template-rows: 40px 
										200px 
										200fr
										100fr 
										40px;
				}
				.menu {
					font-size: 2em;
				}

				.sidebar {
					font-size: 2em;
					#background-color: #ccdefc;
				}
				.button {
					font-size: 32px;	
				}
			}

			.menu {
				#background-color: #ccdefc;
				display: flex;
				align-items: center;
				#border-top-left-radius: 0.5em;
				#border-top-right-radius: 0.5em;
				padding-left: 10px;
			}
			
			.sidebar {
				#background-color: #999;
			}
			
			.main {
				#background-color: #995;
			}
			
			.footer {
				display: flex;
				align-items: center;
				background-color: #000;
				color: #fff;
				font-family: "Courier New", Courier, monospace;
				font-size: 0.75em; /* 14px/16=0.875em */
				#border-bottom-left-radius: 0.5em;
				#border-bottom-right-radius: 0.5em;
			}
			
			.menu_logo {
				padding-left: 10px;
				padding-right: 10px;
			}
			
		    /* Set the size of the div element that contains the map */
  		    #map {
				height: 100%;  /* The height is 400 pixels */
				width: 100%; /*70%;  /* The width is the width of the web page */
			}
		</style>
		
		<script src=script/middles_data_all.js></script>
		<ascript src=script/middles_data_small.js></script>

		    <script>
		//load JSON
		var marker_table = []
		var infowindow_table = []
		var map;

		loadJSON();
		 function disableAllMarkers() {
			for (m in marker_table) {
				marker_table[m].m.setMap(null);
			}
		 }
		 
		 function enableAllMarkers() {
			for (m in marker_table) {
				marker_table[m].m.setMap(map);
			}
		 }
		 
		function disableAllNonPublic() {
			for (m in marker_table) {
				if (marker_table[m].json_data.type == "Niepubliczna") {
					marker_table[m].m.setMap(null);
				}
			}
		 }

		function disableAllNonRnk() {
			for (m in marker_table) {
				if (marker_table[m].json_data.Ranking_Perspektyw[2019] == "") {
					marker_table[m].m.setMap(null);
				} else {
					marker_table[m].m.set('label', marker_table[m].json_data.Ranking_Perspektyw[2019]);					
				}
			}
		 }


		 function buildInfoWindowSchoolInfo(schoolJSON) {
		  iwcontent = '<div class="ifw_container">'
		  iwcontent = iwcontent + '<div class="ifw_title">' + schoolJSON.name +'</div>';
		  iwcontent = iwcontent + '<div class="ifw_webpage"> <a target="_blank" href="http://' + schoolJSON.webpage +'">' + schoolJSON.webpage + '</a></div>';
		  iwcontent = iwcontent + '<div class="ifw_patron">Patron: ' + schoolJSON.patron + '</div>';		  
		  iwcontent = iwcontent + '<div class="ifw_address">' + schoolJSON.street + ' ' + schoolJSON.street_num + '</div>';	
		  console.log(schoolJSON);	  
		  iwcontent = iwcontent + '<div class="ifw_rnk_perspektywy">2019: ' + schoolJSON.Ranking_Perspektyw[2019] + ' 2018: ' + schoolJSON.Ranking_Perspektyw[2018] + ' 2017: ' + schoolJSON.Ranking_Perspektyw[2017]+ ' 2016: ' + schoolJSON.Ranking_Perspektyw[2016]+ ' 2015: ' + schoolJSON.Ranking_Perspektyw[2015]+ '</div>';		  
		  iwcontent = iwcontent + '</div>';
		  console.log("ifwcontent = "+iwcontent)

		  return iwcontent;
		 }

		// Initialize and add the map
		function initMap() {
		  // The location of Uluru
		  console.log("in init map");
		  var waw = {'lat': 52.229158502885544, 'lng': 21.03080616902306};
		   // The map, centered at Waw
		  console.log(document.getElementById('map'));
		  
		  map = new google.maps.Map(
			  document.getElementById('map'), {zoom: 11, center: waw});
			
		  //create all markers and infowindows  
		  console.log("Length of JSON table is: "+data_JSON_tbl.length);
		  for (m in data_JSON_tbl) {
			//console.log(data_JSON_tbl[m]);
			//console.log(data_JSON_tbl[m].Geo_Location[0]);	
			//var contentString = data_JSON_tbl[m].name;
		  var contentString = buildInfoWindowSchoolInfo(data_JSON_tbl[m]);

			//console.log(contentString);
			var mkinfowindow = new google.maps.InfoWindow({
				  content: contentString
			});	
			var marker =  new google.maps.Marker({
				position: {lat:data_JSON_tbl[m].Geo_Location[0].lat, lng:data_JSON_tbl[m].Geo_Location[0].long},
				map: map,
				title: data_JSON_tbl[m].name,
				draggable: false,
				infowindow: mkinfowindow,
				ifopen: false
			})
			var minfo = {m: marker, json_data: data_JSON_tbl[m]}
			marker_table.push(minfo)
			

		 google.maps.event.addListener(marker, 'click', function() {	  
			  if(this.ifopen == false) {
				  this.infowindow.open(map, this);
				  this.ifopen = true;
			  } else {
				  this.infowindow.close(map, this);
				  this.ifopen = false;
			  }
			});
			};
		  }
		  
		  
		  console.log("Length of Marker table is: "+marker_table.length);
		 // console.log(infowindow_table[0].content)
		  //console.log(infowindow_table[1].content)
		  //console.log(infowindow_table[2].content)

		 
		/*  var infowindow = new google.maps.InfoWindow({
			content: contentString
		  });
			var marker = new google.maps.Marker({
			position: waw,
			map: map,
			title: 'Warszawa'
		  });
		  marker.addListener('click', function() {
			infowindow.open(map, marker);
		  });*/
		  
		  
		</script>
		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script>
		  (adsbygoogle = window.adsbygoogle || []).push({
		    google_ad_client: "ca-pub-4261661214028769",
		    enable_page_level_ads: true
		  });
		</script>

		<script> </script>
		
	</head>
<body>
	<div class="gridcontainer">
		<div class="menu">
			<div class="menu_logo"><img src="img/middles_logo.png" alt="Logos" width=25px height=25px> </div>
			menu | warszawa | kontakt
		</div>
		<div class="sidebar">
			<button class="button" onclick="disableAllMarkers();">Wyczysc</button>
			<button class="button" onclick="enableAllMarkers();">Pokaz Wszystkie</button>
			<button class="button" onclick="disableAllNonPublic();">Pokaz Publiczne</button>
			<button class="button" onclick="disableAllNonRnk();">Pokaz z Rankingiem</button>
		</div>
		<div class="main">
			<div id="map">
			</div>
		</div>
		<div class="ads">
		</div>
		<div class="footer">
			&nbsp;&nbsp;&nbsp;&nbsp;Created by AMHF. 2019. 
		</div>
	</div>
	</body>
	
	<script async defer
		src='https://maps.googleapis.com/maps/api/js?key=AIzaSyANvhY-J9fbOgp1Hh-uZzQUw1hYriVvCq0&callback=initMap'>
	</script>
</html>